<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Certificate</title>
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />
    <style>
      html,body{height:100%;margin:0}
      body{display:flex;align-items:center;justify-content:center;background:#111}
      img{max-width:95vw;max-height:95vh;box-shadow:0 6px 30px rgba(0,0,0,0.6)}
      .close{position:fixed;top:12px;right:12px;color:#fff;background:rgba(0,0,0,0.4);border-radius:6px;padding:6px 10px;text-decoration:none}
    </style>
  </head>
  <body>
    <a class="close" href="/">Close</a>
    <img id="cert" alt="Certificate" src="" />
    <script>
      const params = new URLSearchParams(window.location.search);
      const img = params.get('img');
      if(img){
        // Basic safety: only allow same-origin paths
        try{
          const url = new URL(img, window.location.href);
          if(url.origin === window.location.origin){
            document.getElementById('cert').src = url.href;
          } else {
            document.getElementById('cert').alt = 'External image not allowed';
          }
        }catch(e){
          document.getElementById('cert').alt = 'Invalid image URL';
        }
      } else {
        document.getElementById('cert').alt = 'No image provided';
      }
    </script>
  </body>
</html>